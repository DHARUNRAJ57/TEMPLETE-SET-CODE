<!DOCTYPE html>
<html lang="zxx">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="description" content="" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Title -->
    <title>Go Savaari</title>
    <!-- Favicon Icon -->
    <link
      rel="shortcut icon"
      href="assets/images/logos/favicon1.png"
      type="image/x-icon"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Work+Sans:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Flaticon -->
    <link rel="stylesheet" href="assets/css/flaticon.min.css" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="assets/css/fontawesome-5.14.0.min.css" />
    <!-- Bootstrap -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="assets/css/magnific-popup.min.css" />
    <!-- Nice Select -->
    <link rel="stylesheet" href="assets/css/nice-select.min.css" />
    <!-- jQuery UI -->
    <link rel="stylesheet" href="assets/css/jquery-ui.min.css" />
    <!-- Animate -->
    <link rel="stylesheet" href="assets/css/aos.css" />
    <!-- Slick -->
    <link rel="stylesheet" href="assets/css/slick.min.css" />
    <!-- Main Style -->
    <link rel="stylesheet" href="assets/css/style.css" />
    <style>
      .hidden{
        display: none;
      }
    </style>
  </head>
  <body>
    <%- include('./partials/header') -%>
    <!-- <section
        class="page-banner-area overlay py-250 rel z-1 bgs-cover text-center"
        style="background-image: url(assets/images/backgrounds/howtobook.jpg)"
      >
        <div class="container">
          <div class="banner-inner pt-70 rpt-60 text-white">
            <h1
              class="page-title"
              data-aos="fade-up"
              data-aos-duration="1500"
              data-aos-offset="50"
            >
              Booking
            </h1>
            <nav aria-label="breadcrumb">
              <ol
                class="breadcrumb justify-content-center"
                data-aos="fade-up"
                data-aos-delay="50"
                data-aos-duration="1500"
                data-aos-offset="50"
              >
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item active">Booking</li>
              </ol>
            </nav>
          </div>
        </div>
      </section> -->
      <section class="page-banner-area overlay py-50 rel z-1 bgs-cover text-center">
      </section>
      <section class="page-banner-area overlay rel z-1 bgs-cover text-center"
        style="background-image: url(assets/images/backgrounds/howtobook.jpg)">
        <div class="container">
          <div class="banner-inner py-20 text-white">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb justify-content-center" data-aos="fade-up" data-aos-delay="100" data-aos-duration="1500"
                data-aos-offset="50">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item active">Estimation</li>
              </ol>
            </nav>
          </div>
        </div>
      </section>
    <div class="page-wrapper">
      <section class="py-5">
        <div class="container">
          
          <div class="row justify-content-center" style="padding-top: 20px;">
            <div class="col-xl-7 col-lg-9">
              <div class="section-title text-center mb-55" data-aos="fade-up" data-aos-duration="1500" data-aos-offset="50">
                <h2>Estimation<span></span></h2>
              </div>
            </div>
          </div>
          
          <div 
            class="row row-cols-3 justify-content-xl-start" 
            style="
              margin-top: 50px;
              margin-bottom: 50px;
              gap: 15px;
              column-gap: 50px;
              row-gap: 50px;
              justify-content: center;
              align-items: center;
            "
          >

            <% 
              const vehicleImage={ 
                "Sedan" : '/assets/images/cars/swift.png' , 
                "Assured Sedan" : '/assets/images/cars/etios.png' , 
                "MUV" : '/assets/images/cars/ertiga.png' ,
                "Assured Innova" : '/assets/images/cars/innova1.png' , 
                "Innova Crysta" : '/assets/images/cars/crysta.png' 
              } 
            %>
            <% data?.vehicles?.forEach((vehicle, index)=>{ %>
              <div 
                key="<%= index %>" 
                class="col-xl-4 col-md-6 col-sm-10 p-0 shadow <%= index >3 ? '' : 'mt-2' %>" 
                style="
                  border-radius: 10px;
                  position: relative;
                  height: 575px;
                  max-height: 575px;
                  width: 400px;
                  max-width: 400px;
                  z-index: 1000;
                " 
                data-aos="fade-up" 
                data-aos-duration="1000" 
                data-aos-offset="50"
                onmouseover="this.style.transform='translateY(-50px)'; this.style.boxShadow='0 10px 20px rgba(0, 0, 0, 0.1)';"
                onmouseout="this.style.transform=''; this.style.boxShadow='0 4px 8px rgba(0, 0, 0, 0.1)';"
              >
                <img 
                  src="assets/img/offer-badge.png" 
                  alt="Sedan" 
                  style="
                    position: absolute;
                    top: -25px;
                    left: -25px;
                    width: 125px;
                    max-width: 125px;
                    height: 125px; 
                    max-height: 125px;
                    z-index: 10000;
                  " 
                />
                <p 
                  style="
                    position: absolute;
                    display: flex;
                    flex-direction: column;
                    gap: 1px;
                    top: -25px;
                    left: -25px;
                    font-size: 24px;
                    color: #fff;
                    justify-content: center;
                    align-items: center;
                    width: 125px;
                    max-width: 125px;
                    height: 125px; 
                    max-height: 125px;
                    z-index: 10000;
                  "
                >
                  <b>10 %</b>
                  <b>OFF</b>
                </p>
                <div style="
                  padding: 10px;
                  height: 150px;
                  max-height: 150px;
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                  align-items: center;
                ">
                  <img 
                    src="<%= vehicleImage[`${vehicle?.cName!='Assured SUV' ? vehicle?.cName : vehicle?.dName}`] %>"
                    alt="<%= vehicle?.dName %>" 
                    style="
                      height: 125px;
                      max-height: 150px;
                    " 
                  />
                </div>
                <div 
                  class="container" 
                  style="
                    padding-bottom: 20px;
                  "
                >
                  <div 
                    style="
                      padding: 10px;
                      gap: 15px;
                      display: flex;
                      flex-direction: column;
                      justify-content: space-between;
                      align-items: center;
                      height: 400px;
                      max-height: 400px;
                    "
                  >
                    <div 
                      style="
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        align-items: center;
                      "
                    >
                      <del
                        style="
                          color: #ff0000;
                        "
                      >&#8377; <%= ( Number(vehicle?.price) + Number(Math.floor(( vehicle?.price * 10 )/100)) ) ?? 0 %></del>
                      <h5
                        style="
                          color: #00b31e;
                        "
                      >&#8377; <%= vehicle?.price %></h5>
                      <sub
                        style="
                          font-weight: bold;
                          text-transform: uppercase;
                          color: #00c3ff;
                        "
                      ><%= vehicle?.cName %></sub>
                    </div>
                    <%= vehicle?.dName %>
                              
                    <div 
                      style="
                        border-top: 2px solid #000;
                        padding-top: 10px;
                        width:100%;
                        display: flex;
                        flex-direction: column;
                        gap: 5px;
                        justify-content: center;
                        align-items: center;
                      "
                    >
                      <div 
                        style="
                          display: flex; 
                          justify-content:space-between!important;
                          align-items: center;
                          font-size: small;
                          width:100%;
                        "
                      >
                        <span>Included Km</span>
                        <span
                          style="
                            color: #00b31e;
                          "
                          class="<%= ( data?.service=='2' || data?.service==2 ) ? 'hidden' : '' %>"
                        ><%= data?.distance ?? 0 %> Km</span>
                        <span
                          style="
                            color: #00b31e;
                          "
                          class="<%= ( data?.service!='2' && data?.service!=2 ) ? 'hidden' : '' %>"
                        ><%= vehicle?.pack?.toLowerCase().split('-')[1].split('kms')[0] ?? 0 %> <%= Number(vehicle?.pack?.toLowerCase().split('-')[1].split('kms')[0])>1 ? 'Kms' : 'Km' %></span>
                      </div>
          
                      <div 
                        style="
                          display: flex; 
                          justify-content:space-between!important;
                          align-items: center;
                          font-size: small;
                          width:100%;
                        "                        
                        
                      >
                        <span>Extra fare/Km</span>
                        <span
                          style="
                            color: #00b31e;
                          "
                        >
                          <span class="<%= ( data?.service!=='2' && data?.service!==2 ) ? 'hidden' : '' %>">
                            <%= vehicle?.extraKm ?? 0 %>/Km
                          </span>
                          <span class="<%= ( data?.service=='2' || data?.service==2 ) ? 'hidden' : '' %>">
                            <%= vehicle?.rate ?? 0 %>/Km
                          </span>
                        </span>
                      </div>
                      
                      <div 
                        style="
                          display: flex; 
                          justify-content:space-between!important;
                          align-items: center;
                          font-size: small;
                          width:100%;
                        "                        
                        
                      >
                        <span class="<%= ( data?.service=='2' || data?.service==2 ) ? 'hidden' : '' %>">Driver Allowance</span>
                        <span class="<%= ( data?.service!='2' && data?.service!=2 ) ? 'hidden' : '' %>">Extra Hrs</span>
                        <span
                          style="
                            color: #00b31e;
                          "
                          class="<%= ( data?.service=='2' || data?.service==2 ) ? 'hidden' : '' %>"
                        >Rs. <%= vehicle?.betta ?? 0 %></span>
                        <span
                          style="
                            color: #00b31e;
                          "
                          class="<%= ( data?.service!='2' && data?.service!=2 ) ? 'hidden' : '' %>"
                        ><%= vehicle?.extraHr ?? 0 %> <%= vehicle?.extraHr>1 ? 'Hrs' : 'Hr' %></span>
                      </div>
                      <div 
                        style="
                          display: flex; 
                          justify-content:space-between!important;
                          align-items: center;
                          font-size: small;
                          width:100%;
                        "
                      >
                        <span>Toll, State Tax, Hills, Parking Charges</span>
                        <span
                          style="
                            color: #b30000;
                          "
                        >Excluded</span>
                      </div>
                    </div>
        
                    <button onclick="pickVehicle(event, '<%= index %>')" class="theme-btn">Book Now <i class="far fa-arrow-right"></i></button>
      
                  </div>
                </div>
              </div>
            <% }) %> 
          </div>
          
        </div>
      </section>

      <%- include('./partials/footer') -%>
    </div>

    <script>
      const deserialize = JSON.parse(`<%- JSON.stringify(data) %>`);
      async function pickVehicle(event, index) {
        event.preventDefault();
        const vehicle = deserialize?.vehicles[index];
        const bookingInfo = { ...deserialize, vehicle };
        sessionStorage.setItem("bookingInfo", JSON.stringify(bookingInfo));
        await fetch('/send/booking', {
          method: 'post',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ data: {...bookingInfo} })
        })
        window.location.href = "/success";
      }
    </script>

    <!-- Jquery -->
    <script src="assets/js/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap -->
    <script src="assets/js/bootstrap.min.js"></script>
    <!-- Appear Js -->
    <script src="assets/js/appear.min.js"></script>
    <!-- Slick -->
    <script src="assets/js/slick.min.js"></script>
    <!-- jQuery UI -->
    <script src="assets/js/jquery-ui.min.js"></script>
    <!-- Magnific Popup -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- Nice Select -->
    <script src="assets/js/jquery.nice-select.min.js"></script>
    <!-- Image Loader -->
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <!-- Circle Progress -->
    <script src="assets/js/circle-progress.min.js"></script>
    <!-- Skillbar -->
    <script src="assets/js/skill.bars.jquery.min.js"></script>
    <!-- Isotope -->
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <!--  AOS Animation -->
    <script src="assets/js/aos.js"></script>
    <!-- Custom script -->
    <script src="assets/js/script.js"></script>
    <!-- <script src="/assets/js/utils/bookingForm.js"></script> -->


    <script src="assets/js/taxiz.js"></script>

    <!-- CDN for Bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
